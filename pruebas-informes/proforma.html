<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <template id="report_proforma_template">
        <t t-call="web.html_container">
            <t t-foreach="docs" t-as="o">
                <t t-call="web.basic_layout">
                    <div class="page" style="padding: 0 !important; margin: 0 !important; position: relative; background-color: #fcfdfe; min-height: 100vh; font-family: 'Helvetica', Arial, sans-serif; overflow: hidden;">
                        
                        <style>
                            .label-mini {
                                color: #003f7e;
                                font-size: 10px;
                                font-weight: bold;
                                text-transform: uppercase;
                                display: block;
                                margin-bottom: 3px;
                            }
                            .data-value {
                                font-size: 14px;
                                color: #003f7e;
                            }
                            /* Forzamos que las tablas no hereden bordes de Odoo */
                            .table-clean {
                                width: 100%;
                                border-collapse: collapse !important;
                                border: none !important;
                            }
                            .table-clean td, .table-clean th {
                                border: none !important;
                                padding: 0;
                            }
                        </style>

                        <div style="position: absolute; top: 0; z-index: 0; left: 0; width: 100%; line-height: 0;">
                            <svg viewBox="0 0 600 320" preserveAspectRatio="none" style="width: 100%; height: 280px" xmlns="http://www.w3.org/2000/svg">
                                <path d="M0 231L3.5 229.5C7 228 14 225 21.2 233C28.3 241 35.7 260 42.8 270.7C50 281.3 57 283.7 64.2 288.5C71.3 293.3 78.7 300.7 85.8 303.7C93 306.7 100 305.3 107.2 286C114.3 266.7 121.7 229.3 128.8 203.2C136 177 143 162 150 181.5C157 201 164 255 171.2 261.2C178.3 267.3 185.7 225.7 192.8 221.3C200 217 207 250 214.2 270.2C221.3 290.3 228.7 297.7 235.8 275.8C243 254 250 203 257.2 193.5C264.3 184 271.7 216 278.8 231.3C286 246.7 293 245.3 300 230.5C307 215.7 314 187.3 321.2 193C328.3 198.7 335.7 238.3 342.8 248.7C350 259 357 240 364.2 243.7C371.3 247.3 378.7 273.7 385.8 280.5C393 287.3 400 274.7 407.2 253.3C414.3 232 421.7 202 428.8 194C436 186 443 200 450 218C457 236 464 258 471.2 265C478.3 272 485.7 264 492.8 254.8C500 245.7 507 235.3 514.2 217C521.3 198.7 528.7 172.3 535.8 179.3C543 186.3 550 226.7 557.2 247.7C564.3 268.7 571.7 270.3 578.8 263C586 255.7 593 239.3 596.5 231.2L600 223L600 0L596.5 0C593 0 586 0 578.8 0C571.7 0 564.3 0 557.2 0C550 0 543 0 535.8 0C528.7 0 521.3 0 514.2 0C507 0 500 0 492.8 0C485.7 0 471.2 0C464 0 457 0 450 0C443 0 436 0 428.8 0C421.7 0 414.3 0 407.2 0C400 0 393 0 385.8 0C378.7 0 371.3 0 364.2 0C357 0 350 0 342.8 0C335.7 0 328.3 0 321.2 0C314 0 307 0 300 0C293 0 286 0 278.8 0C271.7 0 264.3 0 257.2 0C250 0 243 0 235.8 0C228.7 0 221.3 0 214.2 0C207 0 200 0 192.8 0C185.7 0 178.3 0 171.2 0C164 0 157 0 150 0C143 0 136 0 128.8 0C121.7 0 114.3 0 107.2 0C100 0 93 0 85.8 0C78.7 0 71.3 0 64.2 0C57 0 50 0 42.8 0C35.7 0 28.3 0 21.2 0C14 0 7 0 3.5 0L0 0Z" fill="#2c3e50"></path>
                            </svg>
                        </div>

                        <div style="position: relative; z-index: 10; padding: 30px;">
                            
                            <table class="table-clean" style="margin-bottom: 35px;">
                                <tr>
                                    <td style="width: 50%">
                                        <img t-if="o.company_id.logo" t-att-src="image_data_uri(o.company_id.logo)" style="max-height: 85px; border-radius: 50%; border: 2px solid white; box-shadow: 0 2px 4px rgba(0,0,0,0.2);" alt="Logo"/>
                                    </td>
                                    <td style="width: 50%; text-align: right; color: white;">
                                        <h3 style="margin: 0; font-size: 20px;"><span t-field="o.company_id.name"/></h3>
                                        <div style="font-size: 13px; color: #f0f4f8; margin-top: 5px;">
                                            <span>CIF/NIF: <span t-field="o.company_id.vat"/></span><br/>
                                            <span t-field="o.company_id.city"/>, <span t-field="o.company_id.state_id.name"/>, España
                                        </div>
                                    </td>
                                </tr>
                            </table>

                            <div style="border-left: 8px solid #003f7e; padding: 15px 20px; background-color: #f8fafc; margin-bottom: 30px;">
                                <h2 style="color: #003f7e; margin: 0; font-weight: bold; font-size: 18px;">FACTURA PROFORMA</h2>
                                <p style="margin: 3px 0 0 0; color: #6c757d; text-transform: uppercase; font-size: 10px; letter-spacing: 2px;">Presupuesto de Obra</p>
                            </div>

                            <div style="background-color: white; padding: 25px; border-radius: 8px; border: 1px solid #e1e8ed; box-shadow: 0 4px 12px rgba(0,0,0,0.08); margin-bottom: 30px;">
                                <table class="table-clean">
                                    <tr>
                                        <td style="width: 55%; border-right: 1px solid #edf2f7 !important; padding-right: 20px;">
                                            <span class="label-mini">Cliente</span>
                                            <div t-if="o.partner_id">
                                                <div class="data-value" style="font-weight: bold; font-size: 16px;"><span t-field="o.partner_id.name"/></div>
                                                <div class="data-value" style="margin-top: 4px; color: #718096; font-size: 12px;">
                                                    CIF/NIF: <span t-field="o.partner_id.vat"/><br/>
                                                    <span t-field="o.partner_id" t-options='{"widget": "contact", "fields": ["address"], "no_marker": True}'/>
                                                </div>
                                            </div>
                                        </td>
                                        <td style="width: 45%; padding-left: 20px; vertical-align: top;">
                                            <div style="margin-bottom: 12px;">
                                                <span class="label-mini">Proyecto</span>
                                                <div class="data-value" style="font-weight: bold;"><span t-field="o.name"/></div>
                                            </div>
                                            <div style="display: inline-block; width: 48%;">
                                                <span class="label-mini">Emisión</span>
                                                <div class="data-value"><span t-field="o.create_date" t-options='{"widget": "date"}'/></div>
                                            </div>
                                        </td>
                                    </tr>
                                </table>
                            </div>

                            <table class="table-clean" style="border-radius: 8px; overflow: hidden; box-shadow: 0 1px 3px rgba(0,0,0,0.05); background-color: white;">
                                <thead>
                                    <tr style="background-color: #003f7e; color: white !important;">
                                        <th style="padding: 15px; text-align: left; font-size: 12px; color: white !important;">CONCEPTO</th>
                                        <th style="padding: 15px; text-align: right; font-size: 12px; width: 100px; color: white !important;">TOTAL</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td style="padding: 20px; border-bottom: 1px solid #f0f4f8 !important; font-size: 14px; color: #4a5568;">
                                            Ejecución y materiales para obra: <span t-field="o.name"/>
                                        </td>
                                        <td style="padding: 20px; border-bottom: 1px solid #f0f4f8 !important; text-align: right; font-weight: bold; color: #003f7e;">
                                            <span t-field="o.total" t-options='{"widget": "monetary", "display_currency": o.company_id.currency_id}'/>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>

                            <div style="margin-top: 40px; font-size: 11px; color: #856404; background-color: #fff3cd; padding: 15px; border-radius: 6px; border-left: 4px solid #ffeeba;">
                                <strong>Aviso:</strong> Este documento es una proforma informativa para fines de presupuesto. Los precios finales pueden estar sujetos a cambios basados en la ejecución técnica real y mediciones finales de obra.
                            </div>

                        </div>
                    </div>
                </t>
            </t>
        </t>
    </template>
</odoo>